<img id="profileUserAvatar" src="https://ui-avatars.com/api/?name=User&background=random&size=64&bold=true"
    alt="User Avatar" style="border-radius:50%;width:64px;height:64px;margin-bottom:8px;">
<h2 id="profileUserName">User</h2>
<span id="profileUserRole" class="user-role-badge">User</span>
<p id="profileUserEmail">-</p>
<!DOCTYPE html>
<html lang="en" data-theme="dark">

<head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width,initial-scale=1" />
    <title>Profile - Top-Margin</title>
    <link rel="stylesheet" href="css/base.css" />
    <link rel="stylesheet" href="css/dashboard.css" />
    <script src="js/firebase-config.js"></script>
    <script src="js/supabase-shim.js"></script>
</head>

<body>
    <div class="app-container">
        <header class="app-header">
            <div class="header-left">
                <a href="dashboard.html" class="btn">&larr; Back</a>
            </div>
            <div class="header-right"></div>
        </header>

        <main class="main-content">
            <section class="section-card" style="max-width:720px;margin:24px auto;">
                <h2>Your Profile</h2>
                <form id="profile-form">
                    <div class="form-group">
                        <label for="full_name">Full name</label>
                        <input id="full_name" name="full_name" type="text" placeholder="Your full name" />
                    </div>
                    <div class="form-group">
                        <label for="phone">Phone</label>
                        <input id="phone" name="phone" type="tel" placeholder="+1 555 555 5555" />
                    </div>
                    <div class="form-group">
                        <label for="country">Country</label>
                        <input id="country" name="country" type="text" placeholder="Country" />
                    </div>

                    <div style="display:flex;gap:12px;margin-top:12px;">
                        <button id="save-profile" class="btn btn-primary" type="submit">Save</button>
                        <button id="cancel" class="btn" type="button">Cancel</button>
                    </div>
                </form>
            </section>
        </main>
    </div>

    <div class="toast-container" id="toast-container"></div>

    <script type="module" src="js/profile.js"></script>
</body>
<script>
    // Personalize profile page with user info
    document.addEventListener('DOMContentLoaded', function () {
        setTimeout(function () {
            if (window.authManager && window.authManager.getProfile) {
                const profile = window.authManager.getProfile();
                if (profile) {
                    const name = profile.full_name || profile.email || 'User';
                    const avatar = window.authManager.getAvatarForUser ? window.authManager.getAvatarForUser(profile, profile) : '';
                    const role = profile.role ? profile.role.charAt(0).toUpperCase() + profile.role.slice(1) : 'User';
                    const email = profile.email || '-';
                    document.getElementById('profileUserName').textContent = name;
                    document.getElementById('profileUserRole').textContent = role;
                    document.getElementById('profileUserEmail').textContent = email;
                    if (avatar) document.getElementById('profileUserAvatar').src = avatar;
                }
            }
        }, 1200);
    });
</script>

</html>